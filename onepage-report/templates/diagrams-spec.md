# diagrams.md 圖表規格

## 檔案格式

````markdown
# 圖表集

## 主圖：{圖表標題}

- **類型**：{before_after | platform_compare | flow | timeline}
- **說明**：{一句話說明這張圖要表達什麼}
- **尺寸**：{根據內容量：960x480 / 800x400 / 640x320}

### SVG 生成指示

{詳細描述圖表內容的自然語言提示詞}

包含：
1. 整體佈局（左右對比/上下排列/線性流程）
2. 各元素內容與位置
3. 箭頭/連線關係
4. 顏色標示（紅=問題、綠=解決）
5. 要顯示的文字標籤

---

## 附錄圖 1：{圖表標題}

- **類型**：{類型}
- **說明**：{說明}
- **尺寸**：1056x461（單圖）/ 1152x202（兩圖）/ 605x202（2x2）

### SVG 生成指示

{自然語言描述}

---

## 附錄圖 2：...

（依此類推，有多少就畫多少）
````

---

## 尺寸規格

| 位置 | 尺寸（像素） | 說明 |
|------|-------------|------|
| 主圖 | 動態（見下表） | 根據內容量決定 |
| 附錄單圖 | 1056×461 | 附錄頁只有一張圖時 |
| 附錄兩圖 | 1152×202 | 附錄頁有兩張圖時 |
| 附錄 2x2 | 605×202 | 附錄頁有 3-4 張圖時 |

### 主圖尺寸選擇（根據主投影片內容量）

| 主投影片內容量 | 主圖尺寸 |
|---------------|---------|
| 少（≤3 區塊） | 960×480 |
| 中（4 區塊） | 800×400 |
| 多（≥5 區塊） | 640×320 |

---

## 圖表類型規範

### 1. before_after（前後對比）- 最高優先作為主圖

適用：改善效果、問題解決前後對比

```markdown
### SVG 生成指示

生成「前後對比」圖表，左右並排佈局，**要畫出詳細的內部流程**：

**左側區塊「改善前」**（紅色邊框 #F44336，淺灰背景 #F5F5F5）：
- 標題：改善前：{具體問題名稱}
- 內部要畫出完整流程，每個節點包含：
  1. {具體步驟名稱}
     - 說明：{這步驟做什麼}
     - 問題：{這裡有什麼問題}（用紅色標示）
     - 數據：{相關數據，如延遲時間}
  2. {下一個步驟}...
- 用紅色虛線標出問題發生的位置
- 在問題點旁邊加上說明文字

**右側區塊「改善後」**（綠色邊框 #4CAF50，淺灰背景 #F5F5F5）：
- 標題：改善後：{改善方案名稱}
- 內部畫出改善後的流程
- 用綠色標示改善的部分

**中間連接**：
- 虛線箭頭從左區塊指向右區塊
- 箭頭上方標註：「導入 {方案名稱}」
- 下方標註：「效果：{具體改善數據}」

**底部總結**：
- 加入對比數據表格或重點總結
```

---

### 2. platform_compare（平台對比）

適用：PC vs 手機、不同平台機制對照

```markdown
### SVG 生成指示

生成「平台對比」圖表，上下並排佈局，**每個平台都要有完整的內部流程**：

**上方區塊「PC 平台」**（藍色邊框 #2196F3）：
- 標題：PC 平台：{機制名稱}
- 完整流程（橫向）：
  1. [{步驟1名稱}]
     └ {具體做什麼}
  → 2. [{步驟2名稱}]
     └ {具體做什麼}
  → 3. [{結果}]
- 每個節點內要有 2-3 行說明

**下方區塊「手機平台」**（藍色邊框 #2196F3）：
- 標題：手機平台：{機制名稱}
- 完整流程（橫向），結構同上
- 用不同顏色標示跟 PC 不同的步驟

**差異標註**（用橙色虛線 #FF9800）：
- 連接兩平台的對應步驟
- 每個差異點都要有說明文字

**右側或底部總結區**：
- 關鍵差異列表
- 為什麼手機要用不同做法
```

---

### 3. flow（流程圖）

適用：單一流程、步驟說明、機制運作

```markdown
### SVG 生成指示

生成「流程圖」，橫向線性佈局，**每個節點都要有詳細說明**：

**節點序列**（藍色圓角矩形 #2196F3）：

1. [{開始：觸發條件}]
   ├ 觸發方式：{什麼情況會觸發}
   └ 輸入：{需要什麼輸入}

   ↓ {條件或數據}

2. [{步驟1名稱}]
   ├ 動作：{具體做什麼}
   └ 耗時：{時間}

   ↓ {輸出什麼}

3. [{結果}]
   └ 效果：{達成什麼效果}

**連接方式**：
- 節點間用實線箭頭連接
- 箭頭上標註：條件、數據、或輸出內容
- 如有分支，要畫出判斷菱形和多條路徑
```

---

### 4. timeline（時間軸/延遲鏈路）

適用：延遲分析、時序關係、Input-to-Display 鏈路

```markdown
### SVG 生成指示

生成「時間軸」圖表，橫向佈局，**每個階段都要有時間和說明**：

**時間軸線**：水平線貫穿整張圖，標註總時間

**事件節點**（沿時間軸分佈）：

1. [{起點事件}]（粉紅色 #E91E63）
   ├ 時間點：T=0
   └ 說明：{發生什麼}

   ──[{階段1名稱}: {時間}ms]──→

2. [{中間事件}]（灰色）
   ├ 時間點：T={累計時間}
   └ 說明：{發生什麼}

3. [{終點事件}]（綠色 #4CAF50）
   ├ 時間點：T={總時間}
   └ 說明：{最終結果}

**時間標註**：
- 每個箭頭上標註該階段的時間
- 用紅色標示瓶頸階段
- 底部加入時間總結
```

---

### 5. architecture（系統架構圖）- 附錄必須

適用：展示整體系統架構、模組關係、本次改動位置

```markdown
### SVG 生成指示

生成「系統架構圖」，展示完整的技術架構，**標示本次改動的位置**：

**整體佈局**：分層架構（上到下）或模組架構（左到右）

**分層架構範例**（上到下）：

┌─────────────────────────────────────────────────┐
│  應用層 (Application Layer)                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐       │
│  │ 遊戲App  │  │ 系統UI   │  │ 其他App  │       │
│  └──────────┘  └──────────┘  └──────────┘       │
└─────────────────────────────────────────────────┘
                      ↓ API 呼叫
┌─────────────────────────────────────────────────┐
│  框架層 (Framework Layer)                        │
│  ┌──────────┐  ┌──────────────────┐             │
│  │ Surface  │  │ 本次改動模組     │ ← 用顏色標示 │
│  │ Flinger  │  │ (詳細說明)       │             │
│  └──────────┘  └──────────────────┘             │
└─────────────────────────────────────────────────┘

**標示要求**：
- 用橙色或紅色邊框標示本次改動的模組
- 加上「本次改動」標籤
- 說明改動內容
- 標註資料流向和 API 呼叫關係
```

---

## 通用設計原則

### 詳細程度要求

| 層級 | 說明 | 範例 |
|------|------|------|
| 太簡略 | 只有抽象名稱 | 「步驟1 → 步驟2 → 結果」 |
| 不夠詳細 | 有名稱但沒說明 | 「觸控 → 渲染 → 顯示」 |
| 足夠詳細 | 有具體內容和數據 | 「觸控事件 (5ms) → GPU渲染一幀畫面 (12ms) → 螢幕顯示 (8ms)」 |
| 非常詳細 | 有子步驟和註解 | 每個節點內部還有 2-3 個子項目說明 |

### 節點內容要求

- 每個節點要包含：名稱 + 說明或數據
- 如果有時間/數值，要標註在節點上
- 如果有條件/分支，要畫出來
- 差異點要用不同顏色標示

### 圖表獨立閱讀原則

- 圖表要能**獨立閱讀**，不看報告也能懂
- 標題要說明圖的重點和結論
- 使用圖形符號區分狀態（紅圈叉叉、綠圈勾勾、黃三角警告）
